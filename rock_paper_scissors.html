<!DOCTYPE html>
<html lang="en">
    <head>
        <title>
            Testing JavaScript
        </title>
        <meta charset="UTF-8"/>
    </head>
    <body>
        <script>
            // randomly select move for computer
           function computerPlay() {
                let choice = Math.floor(Math.random() * 3);
                if (choice == 0) {
                    return "rock";
                } else if (choice == 1) {
                    return "paper";
                } else {
                    return "scissors";
                }
            }

           // compare selections and determine the winner
           // 0: player loses, 1: player wins, 2: tie, 3: invalid entry by player
           function playRound(playerSelection, computerSelection) {
                playerSelection = playerSelection.toLowerCase();
                if (playerSelection === computerSelection) {
                    return 2;
                } 
                if (playerSelection === "rock") {
                    if (computerSelection === "scissors") {
                        return 1;
                    } else {
                        return 0;
                    }
                }
                if (playerSelection === "paper") {
                    if (computerSelection === "rock") {
                        return 1;
                    } else {
                        return 0;
                    }
                }
                if (playerSelection === "scissors") {
                    if (computerSelection === "paper") {
                        return 1;
                    } else {
                        return 0;
                    }
                } else {
                    return 3;
                }
            }
           // simulate a game
           function game(n) {
               // keep track of player scores to present at end
               let playerScore = 0;
               let computerScore = 0;
               // play set number of rounds; display result on console each time
               for (let i = 0; i < n; i++) {
                   let computerSelection = computerPlay();
                   let playerSelection = prompt("Enter Rock, Paper or Scissors:");
                   let outcome = playRound(playerSelection, computerSelection);
                   if (outcome === 0) {
                       computerScore += 1;
                       console.log(`You lose! ${computerSelection} beats ${playerSelection}`);
                   } else if (outcome === 1) {
                       playerScore += 1;
                       console.log(`You win! ${playerSelection} beats ${computerSelection}`);
                   } else if (outcome === 2) {
                       console.log(`Tie. Both players selected ${computerSelection}`);
                   } else {
                       console.log("Please enter Rock, Paper or Scissors");
                   }
                }

                // output the result of the round
                if (playerScore > computerScore) {
                    console.log(`You won the game ${playerScore} to ${computerScore}. Congratulations!!!`);
                } else if (playerScore < computerScore) {
                    console.log(`You lost the game ${playerScore} to ${computerScore}. Better Luck Next Time`);
                } else {
                    console.log(`You tied the game ${playerScore} to ${computerScore}`);
                }
            }
            let games = prompt("Enter number of rounds to play in game:")
            game(games);
        </script>
    </body>
</html>